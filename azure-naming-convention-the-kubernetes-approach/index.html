<!doctype html><html lang=en-US><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://nicoo.org/images/favicon.png><title>Azure Naming Convention: The Kubernetes Approach | nicoo.org</title>
<meta name=title content="Azure Naming Convention: The Kubernetes Approach"><meta name=description content="Almost all of my customers spend days and weeks thinking about and creating naming conventions for their Azure resources. However, it usually takes a very short time until these naming conventions become inconsistent, because some names are not suitable for certain resource types or some resource types are not considered in the naming convention at all. It often takes a while until they notice that a user-friendly naming convention does not make any sense in a cattle environment."><meta name=keywords content="azure,"><meta property="og:title" content="Azure Naming Convention: The Kubernetes Approach"><meta property="og:description" content="Almost all of my customers spend days and weeks thinking about and creating naming conventions for their Azure resources. However, it usually takes a very short time until these naming conventions become inconsistent, because some names are not suitable for certain resource types or some resource types are not considered in the naming convention at all. It often takes a while until they notice that a user-friendly naming convention does not make any sense in a cattle environment."><meta property="og:type" content="article"><meta property="og:url" content="https://nicoo.org/azure-naming-convention-the-kubernetes-approach/"><meta property="og:image" content="https://nicoo.org/images/share.png"><meta property="article:section" content="blog"><meta property="article:published_time" content="2020-09-08T00:00:00+00:00"><meta property="article:modified_time" content="2020-09-08T00:00:00+00:00"><meta property="og:site_name" content="nicoo.org"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://nicoo.org/images/share.png"><meta name=twitter:title content="Azure Naming Convention: The Kubernetes Approach"><meta name=twitter:description content="Almost all of my customers spend days and weeks thinking about and creating naming conventions for their Azure resources. However, it usually takes a very short time until these naming conventions become inconsistent, because some names are not suitable for certain resource types or some resource types are not considered in the naming convention at all. It often takes a while until they notice that a user-friendly naming convention does not make any sense in a cattle environment."><meta itemprop=name content="Azure Naming Convention: The Kubernetes Approach"><meta itemprop=description content="Almost all of my customers spend days and weeks thinking about and creating naming conventions for their Azure resources. However, it usually takes a very short time until these naming conventions become inconsistent, because some names are not suitable for certain resource types or some resource types are not considered in the naming convention at all. It often takes a while until they notice that a user-friendly naming convention does not make any sense in a cattle environment."><meta itemprop=datePublished content="2020-09-08T00:00:00+00:00"><meta itemprop=dateModified content="2020-09-08T00:00:00+00:00"><meta itemprop=wordCount content="594"><meta itemprop=image content="https://nicoo.org/images/share.png"><meta itemprop=keywords content="azure,"><meta name=referrer content="no-referrer-when-downgrade"><style>body{font-family:Verdana,sans-serif;margin:auto;padding:20px;max-width:720px;text-align:left;background-color:#fff;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}pre code{color:#222;display:block;padding:20px;white-space:pre-wrap;font-size:14px;overflow-x:auto}div.highlight pre{background-color:initial;color:initial}div.highlight code{background-color:unset;color:unset}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}.helptext{color:#777;font-size:small}.errorlist{color:#eba613;font-size:small}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#333;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#777}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}.helptext{color:#aaa}}</style></head><body><header><a href=/ class=title><h2>nicoo.org</h2></a><nav><a href=/>Home</a>
<a href=/blog>Blog</a></nav></header><main><h1>Azure Naming Convention: The Kubernetes Approach</h1><p><i><time datetime=2020-09-08 pubdate>08 Sep, 2020</time></i></p><content><p>Almost all of my customers spend days and weeks thinking about and creating naming conventions for their Azure resources. However, it usually takes a very short time until these naming conventions become inconsistent, because some names are not suitable for certain resource types or some resource types are not considered in the naming convention at all. It often takes a while until they notice that a user-friendly naming convention does not make any sense in a cattle environment.</p><p>Instead of using user-friendly resource names I want to show you how to use random strings with very less user-friendly information for your resource names, and resource tags for a user-friendly display name and other kind of information. The idea is based on how Kubernetes creates pod names.</p><p>Let me show you the pros and cons of random names compared to user-friendly names.</p><h2 id=user-friendly-names>User-Friendly Names</h2><h3 id=pros>Pros</h3><ul><li>Resource names (mostly) contain human-readable information</li></ul><h3 id=cons>Cons</h3><ul><li>Unable to rename resources</li><li>Must be compatible with all resource types</li><li>Time consuming to create and maintain</li><li>Each resource type has it&rsquo;s own naming convention</li><li>Naming convention must provide unused global unique names</li><li>All users and departments must stick to the latest version of the naming convention</li><li>Difficult blue-green deployments, due to conflicting names</li></ul><h2 id=random-names>Random Names</h2><h3 id=pros-1>Pros</h3><ul><li>Easier to rename resources through resource tags</li><li>Compatible with all resource types</li><li>Easy to apply and maintain</li><li>One naming convention for all resource types</li><li>Names are always globally unique</li><li>Easy to spread across all users and departments</li><li>Always one or more user-friendly names as resource tags</li><li>Easier blue-green deployments</li></ul><h3 id=cons-1>Cons</h3><ul><li>Resource names does not contain much human-readable information</li></ul><h2 id=how-does-it-look-like>How does it look like?</h2><p>Instead of thinking about fancy naming constructs, just think about the most suitable term which describes your service the best and concatenate that term with a random string, until you have reached 16 characters in total (or more, depending on the resource type limitations). The rest of the information should be added as resource tags, such as a user-friendly display name, a cost center etc.</p><p>The name now looks a bit like a Kubernetes pod name.</p><p>So why don&rsquo;t we just use random strings only? The only reason for a bit of human-readable information is, to better identity resources in dropdown menus and other parts of UIs, such as in the Azure Portal, Azure DevOps, Datadog etc.</p><p><img src=/images/azure-naming-convention1.png alt="Random String Naming Convention on Azure"></p><p>The above resources are entirely deployed through Terraform, which makes the generation of random strings even easier, thanks to the built-in Terraform <a href=https://www.terraform.io/docs/configuration/functions/uuidv5.html>uuidv5</a>, <a href=https://www.terraform.io/docs/configuration/functions/sha256.html>sha256</a>, and <a href=https://www.terraform.io/docs/configuration/functions/substr.html>substr</a> functions.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-hcl data-lang=hcl><span style=display:flex><span><span style=color:#66d9ef>locals</span> {
</span></span><span style=display:flex><span>  name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;myapp&#34;</span>
</span></span><span style=display:flex><span>  uuid <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;9ee29d93-35c8-4447-84f7-7d929e81fbd0&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>resource</span> <span style=color:#e6db74>&#34;azurerm_resource_group&#34; &#34;rg&#34;</span> {
</span></span><span style=display:flex><span>  name     <span style=color:#f92672>=</span> <span style=color:#66d9ef>substr</span>(<span style=color:#e6db74>&#34;${local.name}-${sha256(uuidv5(local.uuid, &#34;rg&#34;))}&#34;</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>15</span>)
</span></span><span style=display:flex><span>  location <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;West Europe&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  tags <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    displayName <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;My Demo App&#34;</span>
</span></span><span style=display:flex><span>    costCenter  <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;1000&#34;</span>
</span></span><span style=display:flex><span>    tfState     <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;demo-app.json&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>🆕 <strong>UPDATE</strong>: Instead of using the <em>displayName</em> tag, you could also use the <em><a href=https://learn.microsoft.com/en-us/community/content/hidden-tags-azure#hidden-title>hidden-title</a></em> tag, which shows the display name in parentheses after each resource name in the portal and is also indexed in the Azure Portals search function.
<img src=/images/azure-naming-convention2.png alt="hidden-title tag"></p><h2 id=faq>FAQ</h2><h3 id=why-dont-you-just-use-the-naming-convention-from-the-microsoft-cloud-adoption-framework-cafhttpsdocsmicrosoftcomen-usazurecloud-adoption-frameworkreadyazure-best-practicesnaming-and-tagging>Why don&rsquo;t you just use the naming convention from the <a href=https://docs.microsoft.com/en-us/azure/cloud-adoption-framework/ready/azure-best-practices/naming-and-tagging>Microsoft Cloud Adoption Framework (CAF)</a>?</h3><p>The naming best practices from the cloud adoption framework are guidelines (like how to abbreviate a certain resource type etc.), rather than a ready to use naming convention. Several resource types are not even considered in the cloud adoption framework (e.g. subnet names, NSG rule names, VNet peering names and many more). From my experience it&rsquo;s quiet hard to come up with a meaningful and (more importantly) consistent naming convention which also fits your organizational structures if you stick entirely to the cloud adoption framework.</p></content><p><a href=https://nicoo.org/blog/azure/>#Azure</a></p></main><footer></footer></body></html>